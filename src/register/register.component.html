<div
  class="min-h-screen bg-gradient-to-br from-indigo-600 via-purple-600 to-blue-600 flex items-center justify-center p-4 py-8">
  @if (showForm) {
  <div class="bg-white rounded-xl shadow-2xl w-full max-w-md p-8">
    <!-- Header -->
    <div class="text-center mb-8">
      <div
        class="w-16 h-16 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center mx-auto mb-4">
        <span class="text-3xl font-bold text-white">E</span>
      </div>
      <h1 class="text-3xl font-bold text-gray-900 mb-2">Create Account</h1>
      <p class="text-gray-600">Join our employee system</p>
    </div>

    <!-- Form -->
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="space-y-4">
      <!-- Username Field -->
      <div>
        <label for="username" class="block text-sm font-semibold text-gray-700 mb-2">
          Username
        </label>
        <input type="text" id="username" formControlName="username" placeholder="Enter username"
          class="w-full px-4 py-3 border-2 rounded-lg bg-white text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition"
          [ngClass]="{
              'border-gray-300': !username?.invalid || !username?.touched,
              'border-red-500 bg-red-50': username?.invalid && username?.touched
            }" />
        @if (username?.touched && username?.invalid) {
        <div class="mt-2 space-y-1">
          @if (username?.hasError('required')) {
          <p class="text-red-500 text-sm font-medium">Username is required</p>
          }
          @if (username?.hasError('minlength')) {
          <p class="text-red-500 text-sm font-medium">Username must be at least 3 characters</p>
          }
        </div>
        }
      </div>

      <!-- Full Name Field -->
      <div>
        <label for="full_name" class="block text-sm font-semibold text-gray-700 mb-2">
          Full Name
        </label>
        <input type="text" id="full_name" formControlName="full_name" placeholder="Enter full name"
          class="w-full px-4 py-3 border-2 rounded-lg bg-white text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition"
          [ngClass]="{
              'border-gray-300': !full_name?.invalid || !full_name?.touched,
              'border-red-500 bg-red-50': full_name?.invalid && full_name?.touched
            }" />
        @if (full_name?.touched && full_name?.invalid) {
        <div class="mt-2 space-y-1">
          @if (full_name?.hasError('required')) {
          <p class="text-red-500 text-sm font-medium">Full name is required</p>
          }
          @if (full_name?.hasError('minlength')) {
          <p class="text-red-500 text-sm font-medium">Full name must be at least 2 characters</p>
          }
        </div>
        }
      </div>

      <!-- Email Field -->
      <div>
        <label for="email" class="block text-sm font-semibold text-gray-700 mb-2">
          Email Address
        </label>
        <input type="email" id="email" formControlName="email" placeholder="you@example.com"
          class="w-full px-4 py-3 border-2 rounded-lg bg-white text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition"
          [ngClass]="{
              'border-gray-300': !email?.invalid || !email?.touched,
              'border-red-500 bg-red-50': email?.invalid && email?.touched
            }" />
        @if (email?.touched && email?.invalid) {
        <div class="mt-2 space-y-1">
          @if (email?.hasError('required')) {
          <p class="text-red-500 text-sm font-medium">Email is required</p>
          }
          @if (email?.hasError('email')) {
          <p class="text-red-500 text-sm font-medium">Please enter a valid email</p>
          }
        </div>
        }
      </div>

      <!-- Password Field -->
      <div>
        <label for="password" class="block text-sm font-semibold text-gray-700 mb-2">
          Password
        </label>
        <div class="relative">
          <input [type]="showPassword ? 'text' : 'password'" id="password" formControlName="password"
            placeholder="Enter your password (min 6 characters)"
            class="w-full px-4 py-3 border-2 rounded-lg bg-white text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition"
            [ngClass]="{
                'border-gray-300': !password?.invalid || !password?.touched,
                'border-red-500 bg-red-50': password?.invalid && password?.touched
              }" />
          <button type="button" (click)="togglePasswordVisibility()"
            class="absolute right-3 top-3 text-gray-600 hover:text-gray-800 transition">
            @if (showPassword) {
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path>
              <path fill-rule="evenodd"
                d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"
                clip-rule="evenodd"></path>
            </svg>
            } @else {
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd"
                d="M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-14-14zM11 10a1 1 0 000-2H9.414l.293-.293a1 1 0 111.414 1.414L10.414 9H11zm4-4a4 4 0 11-8 0 4 4 0 018 0z"
                clip-rule="evenodd"></path>
            </svg>
            }
          </button>
        </div>
        @if (password?.touched && password?.invalid) {
        <div class="mt-2 space-y-1">
          @if (password?.hasError('required')) {
          <p class="text-red-500 text-sm font-medium">Password is required</p>
          }
          @if (password?.hasError('minlength')) {
          <p class="text-red-500 text-sm font-medium">Password must be at least 6 characters</p>
          }
        </div>
        }
      </div>

      <!-- Role Select -->
      <div>
        <label for="role" class="block text-sm font-semibold text-gray-700 mb-2">
          Role
        </label>
        <select id="role" formControlName="role"
          class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition">
          <option value="" disabled selected>Select your role</option>
          @for (r of roles; track r.value) {
          <option [value]="r.value">{{ r.label }}</option>
          }
        </select>
        @if (role?.touched && role?.invalid) {
        <p class="text-red-500 text-sm font-medium mt-2">Role is required</p>
        }
      </div>

      <!-- Department Select -->
      <div>
        <label for="department" class="block text-sm font-semibold text-gray-700 mb-2">
          Department
        </label>
        <select id="department" formControlName="department"
          class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition">
          <option value="">-- Select Department --</option>
          @for (dept of departments; track dept) {
          <option [value]="dept">{{ dept }}</option>
          }
        </select>
        @if (department?.touched && department?.invalid) {
        <p class="text-red-500 text-sm font-medium mt-2">Department is required</p>
        }
      </div>

      <!-- Submit Button -->
      <button type="submit" [disabled]="isLoading || registerForm.invalid"
        class="w-full py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold rounded-lg hover:shadow-lg transition disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center gap-2">
        @if (isLoading) {
        <svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor"
            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
          </path>
        </svg>
        Creating Account...
        } @else {
        Create Account
        }
      </button>
    </form>

    <!-- Login Link -->
    <div class="mt-8 text-center">
      <p class="text-gray-600 text-sm">
        Already have an account?
        <a href="/login" class="text-indigo-600 font-semibold hover:underline transition">
          Sign in here
        </a>
      </p>
    </div>
  </div>
  }
</div>